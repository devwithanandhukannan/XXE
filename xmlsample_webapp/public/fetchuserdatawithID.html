<!DOCTYPE html>
<html>
<head>
    <title>XML Web App</title>
</head>
<body>

<h2>Fetch User Data (XML)</h2>
<p>
Itâ€™s a simple XML-based web application built with Node.js + Express that shows how:

A browser (frontend) sends data as XML

A server (backend) receives and processes that XML

The server sends XML back as a response

This is exactly how real web services (especially SOAP / legacy systems) work.
</p>

<input type="text" id="userId" value="101">
<button onclick="fetchUser()">Fetch User</button>

<pre id="result"></pre>

<script>
function fetchUser() {
    const userId = document.getElementById("userId").value;

    const xmlRequest = `
        <request>
            <action>fetchData</action>
            <userId>${userId}</userId>
        </request>
    `;

    fetch("/api/user", {
        method: "POST",
        headers: {
            "Content-Type": "application/xml"
        },
        body: xmlRequest
    })
    .then(res => res.text())
    .then(xmlText => {
        // Display raw XML
        document.getElementById("result").textContent = xmlText;

        // Parse XML
        const parser = new DOMParser();
        const xml = parser.parseFromString(xmlText, "application/xml");

        const status = xml.getElementsByTagName("status")[0].textContent;
        if (status === "success") {
            const name = xml.getElementsByTagName("name")[0].textContent;
        }
    });
}
</script>

</body>
</html>
